---
subcategory: "Kibana"
layout: ""
page_title: "Elasticstack: elasticstack_kibana_alerting_rule Resource"
description: |-
  Creates or updates a Kibana alerting rule.
---

# Resource: elasticstack_kibana_alerting_rule

Creates or updates a Kibana alerting rule. See https://www.elastic.co/guide/en/kibana/current/create-and-manage-rules.html

## Example Usage

```terraform
provider "elasticstack" {
  kibana {}
}

resource "elasticstack_kibana_alerting_rule" "example" {
  name        = "%s"
  consumer    = "alerts"
  notify_when = "onActiveAlert"
  params = jsonencode({
    aggType             = "avg"
    groupBy             = "top"
    termSize            = 10
    timeWindowSize      = 10
    timeWindowUnit      = "s"
    threshold           = [10]
    thresholdComparator = ">"
    index               = ["test-index"]
    timeField           = "@timestamp"
    aggField            = "version"
    termField           = "name"
  })
  rule_type_id = ".index-threshold"
  interval     = "1m"
  enabled      = true
}
```


**NOTE:** `api_key` authentication is only supported for alerting rule resources from version 8.8.0 of the Elastic stack. Using an `api_key` will result in an error message like:

```
Could not create API key - Unsupported scheme "ApiKey" for granting API Key
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `consumer` (String) The name of the application or feature that owns the rule.
- `interval` (String) The check interval, which specifies how frequently the rule conditions are checked. The interval must be specified in seconds (s), minutes (m), hours (h), or days (d).
- `name` (String) The name of the rule. While this name does not have to be unique, a distinctive name can help you identify a rule.
- `params` (String) The rule parameters as a JSON string, which differ for each rule type.
- `rule_type_id` (String) The ID of the rule type that you want to call when the rule is scheduled to run.

### Optional

- `actions` (Block List) An action that runs under defined conditions. (see [below for nested schema](#nestedblock--actions))
- `alert_delay` (Number) A number that indicates how many consecutive runs need to meet the rule conditions for an alert to occur.
- `enabled` (Boolean) Indicates if you want to run the rule on an interval basis.
- `notify_when` (String) Defines how often alerts generate actions. Valid values include: onActionGroupChange, onActiveAlert, onThrottleInterval.
- `rule_id` (String) The identifier for the rule. If it is omitted, an ID is randomly generated.
- `space_id` (String) An identifier for the space. If space_id is not provided, the default space is used.
- `tags` (List of String) A list of tag names that are applied to the rule.
- `throttle` (String) Deprecated in 8.13.0. Defines how often an alert generates repeated actions.

### Read-Only

- `id` (String) Generated ID for the rule (space_id/rule_id).
- `last_execution_date` (String) Date of the last execution of this rule.
- `last_execution_status` (String) Status of the last execution of this rule.
- `scheduled_task_id` (String) ID of the scheduled task that will execute the alert.

<a id="nestedblock--actions"></a>
### Nested Schema for `actions`

Required:

- `id` (String) The identifier for the connector saved object.
- `params` (String) The parameters for the action as a JSON string.

Optional:

- `alerts_filter` (Block, Optional) Conditions that affect whether the action runs. (see [below for nested schema](#nestedblock--actions--alerts_filter))
- `frequency` (Block, Optional) The properties that affect how often actions are generated. (see [below for nested schema](#nestedblock--actions--frequency))
- `group` (String) The group name, which affects when the action runs.

<a id="nestedblock--actions--alerts_filter"></a>
### Nested Schema for `actions.alerts_filter`

Optional:

- `kql` (String) Defines a query filter that determines whether the action runs.
- `timeframe` (Block, Optional) Defines a period that limits whether the action runs. (see [below for nested schema](#nestedblock--actions--alerts_filter--timeframe))

<a id="nestedblock--actions--alerts_filter--timeframe"></a>
### Nested Schema for `actions.alerts_filter.timeframe`

Required:

- `days` (List of Number) Defines the days of the week that the action can run (1=Monday, 7=Sunday).
- `hours_end` (String) The end of the time frame in 24-hour notation (hh:mm).
- `hours_start` (String) The start of the time frame in 24-hour notation (hh:mm).
- `timezone` (String) The ISO time zone for the hours values.



<a id="nestedblock--actions--frequency"></a>
### Nested Schema for `actions.frequency`

Required:

- `notify_when` (String) Defines how often alerts generate actions.
- `summary` (Boolean) Indicates whether the action is a summary.

Optional:

- `throttle` (String) Defines how often an alert generates repeated actions.

## Import

Import is supported using the following syntax:

```shell
terraform import elasticstack_kibana_alerting_rule.my_rule <space id>/<rule id>
```
