---
subcategory: "Kibana"
layout: ""
page_title: "Elasticstack: elasticstack_kibana_alerting_rule Resource"
description: |-
  Creates or updates a Kibana alerting rule.
---

# Resource: elasticstack_kibana_alerting_rule

Creates or updates a Kibana alerting rule. See https://www.elastic.co/guide/en/kibana/current/create-and-manage-rules.html

## Example Usage

```terraform
provider "elasticstack" {
  elasticsearch {}
}

resource "elasticstack_kibana_alerting_rule" "example" {
  name        = "%s"
  consumer    = "alerts"
  notify_when = "onActiveAlert"
  params = jsonencode({
    aggType             = "avg"
    groupBy             = "top"
    termSize            = 10
    timeWindowSize      = 10
    timeWindowUnit      = "s"
    threshold           = [10]
    thresholdComparator = ">"
    index               = ["test-index"]
    timeField           = "@timestamp"
    aggField            = "version"
    termField           = "name"
  })
  rule_type_id = ".index-threshold"
  interval     = "1m"
  enabled      = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `consumer` (String) The name of the application or feature that owns the rule.
- `interval` (String) The check interval, which specifies how frequently the rule conditions are checked. The interval must be specified in seconds, minutes, hours or days.
- `name` (String) The name of the rule. While this name does not have to be unique, a distinctive name can help you identify a rule.
- `notify_when` (String) Defines how often alerts generate actions. One of `onActionGroupChange`, `onActiveAlert`, or `onThrottleInterval`.
- `params` (String) The parameters to pass to the rule type executor params value. This will also validate against the rule type params validator, if defined.
- `rule_type_id` (String) The ID of the rule type that you want to call when the rule is scheduled to run. For more information about the valid values, list the rule types using [Get rule types API](https://www.elastic.co/guide/en/kibana/master/list-rule-types-api.html) or refer to the [Rule types documentation](https://www.elastic.co/guide/en/kibana/master/rule-types.html).

### Optional

- `actions` (Block List) An array of action objects. (see [below for nested schema](#nestedblock--actions))
- `enabled` (Boolean) Indicates if you want to run the rule on an interval basis.
- `rule_id` (String) A UUID v1 or v4 to use instead of a randomly generated ID.
- `space_id` (String) An identifier for the space. If space_id is not provided, the default space is used.
- `tags` (List of String) A list of tag names that are applied to the rule.
- `throttle` (String) Defines how often an alert generates repeated actions. This custom action interval must be specified in seconds, minutes, hours, or days. For example, 10m or 1h. This property is used only if notify_when is onThrottleInterval.

### Read-Only

- `id` (String) The ID of this resource.
- `last_execution_date` (String) Date of the last execution of this rule.
- `last_execution_status` (String) Status of the last execution of this rule.
- `scheduled_task_id` (String) ID of the scheduled task that will execute the alert.

<a id="nestedblock--actions"></a>
### Nested Schema for `actions`

Required:

- `id` (String) The ID of the connector saved object.
- `params` (String) The map to the `params` that the connector type will receive.

Optional:

- `group` (String) Grouping actions is recommended for escalations for different types of alerts.

## Import

Import is supported using the following syntax:

```shell
terraform import elasticstack_kibana_alerting_rule.my_rule <space id>/<rule id>
```
