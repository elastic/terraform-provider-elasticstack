
---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "elasticstack_elasticsearch_snapshot_repository Resource - terraform-provider-elasticstack"
subcategory: "Snapshot"
description: |-
  Registers or updates a snapshot repository. See: https://www.elastic.co/guide/en/elasticsearch/reference/current/put-snapshot-repo-api.html and https://www.elastic.co/guide/en/elasticsearch/reference/current/snapshots-register-repository.html
---

# elasticstack_elasticsearch_snapshot_repository (Resource)

Registers or updates a snapshot repository. See: https://www.elastic.co/guide/en/elasticsearch/reference/current/put-snapshot-repo-api.html and https://www.elastic.co/guide/en/elasticsearch/reference/current/snapshots-register-repository.html

## Example Usage

```terraform
provider "elasticstack" {
  elasticsearch {}
}

resource "elasticstack_elasticsearch_snapshot_repository" "my_url_repo" {
  name = "my_url_repo"

  url {
    url = "https://example.com/repo"
  }
}

resource "elasticstack_elasticsearch_snapshot_repository" "my_fs_repo" {
  name = "my_fs_repo"

  fs {
    location                  = "/tmp"
    compress                  = true
    max_restore_bytes_per_sec = "10mb"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the snapshot repository to register or update.

### Optional

- `azure` (Block List, Max: 1) Support for using Azure Blob storage as a repository for Snapshot/Restore. See: https://www.elastic.co/guide/en/elasticsearch/plugins/current/repository-azure.html (see [below for nested schema](#nestedblock--azure))
- `elasticsearch_connection` (Block List, Max: 1, Deprecated) Elasticsearch connection configuration block. This property will be removed in a future provider version. Configure the Elasticsearch connection via the provider configuration instead. (see [below for nested schema](#nestedblock--elasticsearch_connection))
- `fs` (Block List, Max: 1) Shared filesystem repository. Repositories of this type use a shared filesystem to store snapshots. This filesystem must be accessible to all master and data nodes in the cluster. (see [below for nested schema](#nestedblock--fs))
- `gcs` (Block List, Max: 1) Support for using the Google Cloud Storage service as a repository for Snapshot/Restore. See: https://www.elastic.co/guide/en/elasticsearch/plugins/current/repository-gcs.html (see [below for nested schema](#nestedblock--gcs))
- `hdfs` (Block List, Max: 1) Support for using HDFS File System as a repository for Snapshot/Restore. See: https://www.elastic.co/guide/en/elasticsearch/plugins/current/repository-hdfs.html (see [below for nested schema](#nestedblock--hdfs))
- `s3` (Block List, Max: 1) Support for using AWS S3 as a repository for Snapshot/Restore. See: https://www.elastic.co/guide/en/elasticsearch/plugins/current/repository-s3-repository.html (see [below for nested schema](#nestedblock--s3))
- `url` (Block List, Max: 1) URL repository. Repositories of this type are read-only for the cluster. This means the cluster can retrieve or restore snapshots from the repository but cannot write or create snapshots in it. (see [below for nested schema](#nestedblock--url))
- `verify` (Boolean) If true, the request verifies the repository is functional on all master and data nodes in the cluster.

### Read-Only

- `id` (String) Internal identifier of the resource

<a id="nestedblock--azure"></a>
### Nested Schema for `azure`

Required:

- `container` (String) Container name. You must create the Azure container before creating the repository.

Optional:

- `base_path` (String) Specifies the path within the container to the repository data.
- `chunk_size` (String) Maximum size of files in snapshots.
- `client` (String) Azure named client to use.
- `compress` (Boolean) If true, metadata files, such as index mappings and settings, are compressed in snapshots.
- `location_mode` (String) Location mode. `primary_only` or `secondary_only`. See: https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy
- `max_restore_bytes_per_sec` (String) Maximum snapshot restore rate per node.
- `max_snapshot_bytes_per_sec` (String) Maximum snapshot creation rate per node.
- `readonly` (Boolean) If true, the repository is read-only.


<a id="nestedblock--elasticsearch_connection"></a>
### Nested Schema for `elasticsearch_connection`

Optional:

- `api_key` (String, Sensitive) API Key to use for authentication to Elasticsearch
- `bearer_token` (String, Sensitive) Bearer Token to use for authentication to Elasticsearch
- `ca_data` (String) PEM-encoded custom Certificate Authority certificate
- `ca_file` (String) Path to a custom Certificate Authority certificate
- `cert_data` (String) PEM encoded certificate for client auth
- `cert_file` (String) Path to a file containing the PEM encoded certificate for client auth
- `endpoints` (List of String, Sensitive) A list of endpoints where the terraform provider will point to, this must include the http(s) schema and port number.
- `es_client_authentication` (String, Sensitive) ES Client Authentication field to be used with the JWT token
- `headers` (Map of String, Sensitive) A list of headers to be sent with each request to Elasticsearch.
- `insecure` (Boolean) Disable TLS certificate validation
- `key_data` (String, Sensitive) PEM encoded private key for client auth
- `key_file` (String) Path to a file containing the PEM encoded private key for client auth
- `password` (String, Sensitive) Password to use for API authentication to Elasticsearch.
- `username` (String) Username to use for API authentication to Elasticsearch.


<a id="nestedblock--fs"></a>
### Nested Schema for `fs`

Required:

- `location` (String) Location of the shared filesystem used to store and retrieve snapshots.

Optional:

- `chunk_size` (String) Maximum size of files in snapshots.
- `compress` (Boolean) If true, metadata files, such as index mappings and settings, are compressed in snapshots.
- `max_number_of_snapshots` (Number) Maximum number of snapshots the repository can contain.
- `max_restore_bytes_per_sec` (String) Maximum snapshot restore rate per node.
- `max_snapshot_bytes_per_sec` (String) Maximum snapshot creation rate per node.
- `readonly` (Boolean) If true, the repository is read-only.


<a id="nestedblock--gcs"></a>
### Nested Schema for `gcs`

Required:

- `bucket` (String) The name of the bucket to be used for snapshots.

Optional:

- `base_path` (String) Specifies the path within the bucket to the repository data. Defaults to the root of the bucket.
- `chunk_size` (String) Maximum size of files in snapshots.
- `client` (String) The name of the client to use to connect to Google Cloud Storage.
- `compress` (Boolean) If true, metadata files, such as index mappings and settings, are compressed in snapshots.
- `max_restore_bytes_per_sec` (String) Maximum snapshot restore rate per node.
- `max_snapshot_bytes_per_sec` (String) Maximum snapshot creation rate per node.
- `readonly` (Boolean) If true, the repository is read-only.


<a id="nestedblock--hdfs"></a>
### Nested Schema for `hdfs`

Required:

- `path` (String) The file path within the filesystem where data is stored/loaded.
- `uri` (String) The uri address for hdfs. ex: "hdfs://<host>:<port>/".

Optional:

- `chunk_size` (String) Maximum size of files in snapshots.
- `compress` (Boolean) If true, metadata files, such as index mappings and settings, are compressed in snapshots.
- `load_defaults` (Boolean) Whether to load the default Hadoop configuration or not.
- `max_restore_bytes_per_sec` (String) Maximum snapshot restore rate per node.
- `max_snapshot_bytes_per_sec` (String) Maximum snapshot creation rate per node.
- `readonly` (Boolean) If true, the repository is read-only.


<a id="nestedblock--s3"></a>
### Nested Schema for `s3`

Required:

- `bucket` (String) Name of the S3 bucket to use for snapshots.

Optional:

- `base_path` (String) Specifies the path to the repository data within its bucket.
- `buffer_size` (String) Minimum threshold below which the chunk is uploaded using a single request.
- `canned_acl` (String) The S3 repository supports all S3 canned ACLs.
- `chunk_size` (String) Maximum size of files in snapshots.
- `client` (String) The name of the S3 client to use to connect to S3.
- `compress` (Boolean) If true, metadata files, such as index mappings and settings, are compressed in snapshots.
- `endpoint` (String) Custom S3 service endpoint, useful when using VPC endpoints or non-default S3 URLs.
- `max_restore_bytes_per_sec` (String) Maximum snapshot restore rate per node.
- `max_snapshot_bytes_per_sec` (String) Maximum snapshot creation rate per node.
- `path_style_access` (Boolean) If true, path style access pattern will be used.
- `readonly` (Boolean) If true, the repository is read-only.
- `server_side_encryption` (Boolean) When true, files are encrypted server-side using AES-256 algorithm.
- `storage_class` (String) Sets the S3 storage class for objects stored in the snapshot repository.


<a id="nestedblock--url"></a>
### Nested Schema for `url`

Required:

- `url` (String) URL location of the root of the shared filesystem repository.

Optional:

- `chunk_size` (String) Maximum size of files in snapshots.
- `compress` (Boolean) If true, metadata files, such as index mappings and settings, are compressed in snapshots.
- `http_max_retries` (Number) Maximum number of retries for http and https URLs.
- `http_socket_timeout` (String) Maximum wait time for data transfers over a connection.
- `max_number_of_snapshots` (Number) Maximum number of snapshots the repository can contain.
- `max_restore_bytes_per_sec` (String) Maximum snapshot restore rate per node.
- `max_snapshot_bytes_per_sec` (String) Maximum snapshot creation rate per node.
- `readonly` (Boolean) If true, the repository is read-only.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import elasticstack_elasticsearch_snapshot_repository.my_repository <cluster_uuid>/<repository name>
```
