---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "elasticstack_elasticsearch_security_role Resource - terraform-provider-elasticstack"
subcategory: "Security"
description: |-
  Adds and updates roles in the native realm. See the role API documentation https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role.html for more details.
---

# elasticstack_elasticsearch_security_role (Resource)

Adds and updates roles in the native realm. See the [role API documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-put-role.html) for more details.

## Example Usage

```terraform
provider "elasticstack" {
  elasticsearch {}
}

resource "elasticstack_elasticsearch_security_role" "role" {
  name        = "testrole"
  description = "Role for testing"
  cluster     = ["all"]

  indices {
    names      = ["index1", "index2"]
    privileges = ["all"]
  }

  applications {
    application = "myapp"
    privileges  = ["admin", "read"]
    resources   = ["*"]
  }

  run_as = ["other_user"]

  metadata = jsonencode({
    version = 1
  })
}

output "role" {
  value = elasticstack_elasticsearch_security_role.role
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the role.

### Optional

- `applications` (Block Set) A list of application privilege entries. (see [below for nested schema](#nestedblock--applications))
- `cluster` (Set of String) A list of cluster privileges. These privileges define the cluster level actions that users with this role are able to execute.
- `description` (String) The description of the role.
- `elasticsearch_connection` (Block List, Deprecated) Elasticsearch connection configuration block. (see [below for nested schema](#nestedblock--elasticsearch_connection))
- `global` (String) An object defining global privileges.
- `indices` (Block Set) A list of indices permissions entries. (see [below for nested schema](#nestedblock--indices))
- `metadata` (String) Optional meta-data.
- `remote_indices` (Block Set) A list of remote indices permissions entries. Remote indices are effective for remote clusters configured with the API key based model. They have no effect for remote clusters configured with the certificate based model. (see [below for nested schema](#nestedblock--remote_indices))
- `run_as` (Set of String) A list of users that the owners of this role can impersonate.

### Read-Only

- `id` (String) Internal identifier of the resource

<a id="nestedblock--applications"></a>
### Nested Schema for `applications`

Required:

- `application` (String) The name of the application to which this entry applies.
- `privileges` (Set of String) A list of strings, where each element is the name of an application privilege or action.
- `resources` (Set of String) A list resources to which the privileges are applied.


<a id="nestedblock--elasticsearch_connection"></a>
### Nested Schema for `elasticsearch_connection`

Optional:

- `api_key` (String, Sensitive) API Key to use for authentication to Elasticsearch
- `bearer_token` (String, Sensitive) Bearer Token to use for authentication to Elasticsearch
- `ca_data` (String) PEM-encoded custom Certificate Authority certificate
- `ca_file` (String) Path to a custom Certificate Authority certificate
- `cert_data` (String) PEM encoded certificate for client auth
- `cert_file` (String) Path to a file containing the PEM encoded certificate for client auth
- `endpoints` (List of String, Sensitive) A list of endpoints where the terraform provider will point to, this must include the http(s) schema and port number.
- `es_client_authentication` (String, Sensitive) ES Client Authentication field to be used with the JWT token
- `headers` (Map of String, Sensitive) A list of headers to be sent with each request to Elasticsearch.
- `insecure` (Boolean) Disable TLS certificate validation
- `key_data` (String, Sensitive) PEM encoded private key for client auth
- `key_file` (String) Path to a file containing the PEM encoded private key for client auth
- `password` (String, Sensitive) Password to use for API authentication to Elasticsearch.
- `username` (String) Username to use for API authentication to Elasticsearch.


<a id="nestedblock--indices"></a>
### Nested Schema for `indices`

Required:

- `names` (Set of String) A list of indices (or index name patterns) to which the permissions in this entry apply.
- `privileges` (Set of String) The index level privileges that the owners of the role have on the specified indices.

Optional:

- `allow_restricted_indices` (Boolean) Include matching restricted indices in names parameter. Usage is strongly discouraged as it can grant unrestricted operations on critical data, make the entire system unstable or leak sensitive information.
- `field_security` (Attributes List) The document fields that the owners of the role have read access to. (see [below for nested schema](#nestedatt--indices--field_security))
- `query` (String) A search query that defines the documents the owners of the role have read access to.

<a id="nestedatt--indices--field_security"></a>
### Nested Schema for `indices.field_security`

Optional:

- `except` (Set of String) List of the fields to which the grants will not be applied.
- `grant` (Set of String) List of the fields to grant the access to.



<a id="nestedblock--remote_indices"></a>
### Nested Schema for `remote_indices`

Required:

- `clusters` (Set of String) A list of cluster aliases to which the permissions in this entry apply.
- `names` (Set of String) A list of indices (or index name patterns) to which the permissions in this entry apply.
- `privileges` (Set of String) The index level privileges that the owners of the role have on the specified indices.

Optional:

- `field_security` (Block List) The document fields that the owners of the role have read access to. (see [below for nested schema](#nestedblock--remote_indices--field_security))
- `query` (String) A search query that defines the documents the owners of the role have read access to.

<a id="nestedblock--remote_indices--field_security"></a>
### Nested Schema for `remote_indices.field_security`

Optional:

- `except` (Set of String) List of the fields to which the grants will not be applied.
- `grant` (Set of String) List of the fields to grant the access to.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import elasticstack_elasticsearch_security_role.my_role <cluster_uuid>/<role name>
```
