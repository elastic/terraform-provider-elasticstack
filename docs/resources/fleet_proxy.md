---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "elasticstack_fleet_proxy Resource - terraform-provider-elasticstack"
subcategory: "Fleet"
description: |-
  Creates and manages a Fleet Proxy. Proxies can be used by Fleet Server Hosts and Elasticsearch Outputs to route traffic through a proxy server.
---

# elasticstack_fleet_proxy (Resource)

Creates and manages a Fleet Proxy. Proxies can be used by Fleet Server Hosts and Elasticsearch Outputs to route traffic through a proxy server.

## Example Usage

### Basic Proxy

```terraform
provider "elasticstack" {
  kibana {}
}

resource "elasticstack_fleet_proxy" "example" {
  name = "Corporate Proxy"
  url  = "https://proxy.example.com:8080"
}
```

### Proxy with TLS Client Certificate Authentication

```terraform
resource "elasticstack_fleet_proxy" "secure_proxy" {
  name = "Secure Corporate Proxy"
  url  = "https://proxy.example.com:8443"

  certificate = file("${path.module}/certs/client-cert.pem")
  certificate_authorities = file("${path.module}/certs/ca.pem")
  certificate_key = file("${path.module}/certs/client-key.pem")

  proxy_headers = {
    "X-Custom-Header" = "value"
  }
}
```

### Using Proxy with Fleet Output

```terraform
resource "elasticstack_fleet_proxy" "output_proxy" {
  name = "Output Proxy"
  url  = "https://proxy.example.com:8080"
}

resource "elasticstack_fleet_output" "elasticsearch" {
  name     = "elasticsearch"
  type     = "elasticsearch"
  hosts    = ["https://elasticsearch:9200"]
  proxy_id = elasticstack_fleet_proxy.output_proxy.proxy_id
}
```

### Using Proxy with Fleet Server Host

```terraform
resource "elasticstack_fleet_proxy" "fleet_proxy" {
  name = "Fleet Server Proxy"
  url  = "https://proxy.example.com:8080"
}

resource "elasticstack_fleet_server_host" "example" {
  name     = "Fleet Server"
  hosts    = ["https://fleet-server:8220"]
  proxy_id = elasticstack_fleet_proxy.fleet_proxy.proxy_id
}
```

### Space-Aware Proxy

```terraform
resource "elasticstack_fleet_proxy" "team_proxy" {
  name      = "Team Proxy"
  url       = "https://proxy.example.com:8080"
  space_ids = ["team-a", "team-b"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the proxy.
- `url` (String) The proxy URL (e.g., https://proxy.example.com:8080).

### Optional

- `certificate` (String, Sensitive) PEM-encoded client certificate for TLS authentication with the proxy.
- `certificate_authorities` (String, Sensitive) PEM-encoded certificate authorities for verifying the proxy server certificate.
- `certificate_key` (String, Sensitive) PEM-encoded private key for the client certificate.
- `is_preconfigured` (Boolean) Indicates if the proxy is preconfigured (managed outside Terraform).
- `proxy_headers` (Map of String) Custom headers to send with proxy requests.
- `proxy_id` (String) Unique identifier of the proxy. If not specified, one will be generated.
- `space_ids` (Set of String) The Kibana space IDs where this proxy is available.

### Read-Only

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import elasticstack_fleet_proxy.my_proxy <proxy_id>
```

If the proxy is in a specific Kibana space, you can import it with the space ID:

```shell
terraform import elasticstack_fleet_proxy.my_proxy <space_id>/<proxy_id>
```
