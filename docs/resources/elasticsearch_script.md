---
subcategory: "Cluster"
layout: ""
page_title: "Elasticstack: elasticstack_elasticsearch_script Resource"
description: |-
  Creates or updates a stored script or search template.
---

# Resource: elasticstack_elasticsearch_script

Creates or updates a stored script or search template. See https://www.elastic.co/guide/en/elasticsearch/reference/current/create-stored-script-api.html

## Example Usage

```terraform
provider "elasticstack" {
  elasticsearch {}
}

resource "elasticstack_elasticsearch_script" "my_script" {
  script_id = "my_script"
  lang      = "painless"
  source    = "Math.log(_score * 2) + params['my_modifier']"
  context   = "score"
}

resource "elasticstack_elasticsearch_script" "my_search_template" {
  script_id = "my_search_template"
  lang      = "mustache"
  source = jsonencode({
    query = {
      match = {
        message = "{{query_string}}"
      }
    }
    from = "{{from}}"
    size = "{{size}}"
  })
  params = jsonencode({
    query_string = "My query string"
  })
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `lang` (String) Script language. For search templates, use `mustache`.
- `script_id` (String) Identifier for the stored script. Must be unique within the cluster.
- `source` (String) For scripts, a string containing the script. For search templates, an object containing the search template.

### Optional

- `context` (String) Context in which the script or search template should run.
- `elasticsearch_connection` (Block List, Max: 1, Deprecated) Elasticsearch connection configuration block. This property will be removed in a future provider version. Configure the Elasticsearch connection via the provider configuration instead. (see [below for nested schema](#nestedblock--elasticsearch_connection))
- `params` (String) Parameters for the script or search template.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--elasticsearch_connection"></a>
### Nested Schema for `elasticsearch_connection`

Optional:

- `api_key` (String, Sensitive) API Key to use for authentication to Elasticsearch
- `bearer_token` (String, Sensitive) Bearer Token to use for authentication to Elasticsearch
- `ca_data` (String) PEM-encoded custom Certificate Authority certificate
- `ca_file` (String) Path to a custom Certificate Authority certificate
- `cert_data` (String) PEM encoded certificate for client auth
- `cert_file` (String) Path to a file containing the PEM encoded certificate for client auth
- `endpoints` (List of String, Sensitive) A list of endpoints where the terraform provider will point to, this must include the http(s) schema and port number.
- `es_client_authentication` (String, Sensitive) ES Client Authentication field to be used with the JWT token
- `headers` (Map of String, Sensitive) A list of headers to be sent with each request to Elasticsearch.
- `insecure` (Boolean) Disable TLS certificate validation
- `key_data` (String, Sensitive) PEM encoded private key for client auth
- `key_file` (String) Path to a file containing the PEM encoded private key for client auth
- `password` (String, Sensitive) Password to use for API authentication to Elasticsearch.
- `username` (String) Username to use for API authentication to Elasticsearch.

## Import

Import is supported using the following syntax:

```shell
terraform import elasticstack_elasticsearch_script.my_script <cluster_uuid>/<script id>
```
