---
subcategory: "Transform"
layout: ""
page_title: "Elasticstack: elasticstack_elasticsearch_transform Resource"
description: |-
  Manages transforms. Transforms enable you to convert existing Elasticsearch indices into summarized indices.
---

# Resource: elasticstack_elasticsearch_transform

Creates, updates, starts and stops a transform. See: https://www.elastic.co/guide/en/elasticsearch/reference/current/transforms.html

**NOTE:** Some transform settings require a minimum Elasticsearch version. Such settings will be ignored when applied to versions below the required one (a warning will be issued in the logs).

## Example Usage

```terraform
resource "elasticstack_elasticsearch_transform" "transform_with_pivot" {
  name        = "transform-pivot"
  description = "A meaningful description"

  source {
    indices = ["names_or_patterns_for_input_index"]
  }

  destination {
    index = "destination_index_for_transform"

    aliases {
      alias            = "test_alias_1"
      move_on_creation = true
    }

    aliases {
      alias            = "test_alias_2"
      move_on_creation = false
    }
  }

  pivot = jsonencode({
    "group_by" : {
      "customer_id" : {
        "terms" : {
          "field" : "customer_id",
          "missing_bucket" : true
        }
      }
    },
    "aggregations" : {
      "max_price" : {
        "max" : {
          "field" : "taxful_total_price"
        }
      }
    }
  })

  frequency = "5m"

  retention_policy {
    time {
      field   = "order_date"
      max_age = "30d"
    }
  }

  sync {
    time {
      field = "order_date"
      delay = "10s"
    }
  }

  max_page_search_size = 2000

  enabled          = false
  defer_validation = false
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (Block List, Min: 1, Max: 1) The destination for the transform. (see [below for nested schema](#nestedblock--destination))
- `name` (String) Name of the transform you wish to create.
- `source` (Block List, Min: 1, Max: 1) The source of the data for the transform. (see [below for nested schema](#nestedblock--source))

### Optional

- `align_checkpoints` (Boolean) Specifies whether the transform checkpoint ranges should be optimized for performance.
- `dates_as_epoch_millis` (Boolean) Defines if dates in the output should be written as ISO formatted string (default) or as millis since epoch.
- `deduce_mappings` (Boolean) Specifies whether the transform should deduce the destination index mappings from the transform config.
- `defer_validation` (Boolean) When true, deferrable validations are not run upon creation, but rather when the transform is started. This behavior may be desired if the source index does not exist until after the transform is created. Default is `false`
- `description` (String) Free text description of the transform.
- `docs_per_second` (Number) Specifies a limit on the number of input documents per second. Default (unset) value disables throttling.
- `enabled` (Boolean) Controls whether the transform should be started or stopped. Default is `false` (stopped).
- `frequency` (String) The interval between checks for changes in the source indices when the transform is running continuously. Defaults to `1m`.
- `latest` (String) The latest method transforms the data by finding the latest document for each unique key. JSON definition expected. Either 'pivot' or 'latest' must be present.
- `max_page_search_size` (Number) Defines the initial page size to use for the composite aggregation for each checkpoint. Default is 500.
- `metadata` (String) Defines optional transform metadata.
- `num_failure_retries` (Number) Defines the number of retries on a recoverable failure before the transform task is marked as failed. The default value is the cluster-level setting num_transform_failure_retries.
- `pivot` (String) The pivot method transforms the data by aggregating and grouping it. JSON definition expected. Either 'pivot' or 'latest' must be present.
- `retention_policy` (Block List, Max: 1) Defines a retention policy for the transform. (see [below for nested schema](#nestedblock--retention_policy))
- `sync` (Block List, Max: 1) Defines the properties transforms require to run continuously. (see [below for nested schema](#nestedblock--sync))
- `timeout` (String) Period to wait for a response from Elasticsearch when performing any management operation. If no response is received before the timeout expires, the operation fails and returns an error. Defaults to `30s`.
- `unattended` (Boolean) In unattended mode, the transform retries indefinitely in case of an error which means the transform never fails.

### Read-Only

- `id` (String) Internal identifier of the resource

<a id="nestedblock--destination"></a>
### Nested Schema for `destination`

Required:

- `index` (String) The destination index for the transform.

Optional:

- `aliases` (Block List) The aliases that the destination index for the transform should have. (see [below for nested schema](#nestedblock--destination--aliases))
- `pipeline` (String) The unique identifier for an ingest pipeline.

<a id="nestedblock--destination--aliases"></a>
### Nested Schema for `destination.aliases`

Required:

- `alias` (String) The name of the alias.

Optional:

- `move_on_creation` (Boolean) Whether the destination index should be the only index in this alias. Defaults to false.



<a id="nestedblock--source"></a>
### Nested Schema for `source`

Required:

- `indices` (List of String) The source indices for the transform.

Optional:

- `query` (String) A query clause that retrieves a subset of data from the source index.
- `runtime_mappings` (String) Definitions of search-time runtime fields that can be used by the transform.


<a id="nestedblock--retention_policy"></a>
### Nested Schema for `retention_policy`

Required:

- `time` (Block List, Min: 1, Max: 1) Specifies that the transform uses a time field to set the retention policy. This is currently the only supported option. (see [below for nested schema](#nestedblock--retention_policy--time))

<a id="nestedblock--retention_policy--time"></a>
### Nested Schema for `retention_policy.time`

Required:

- `field` (String) The date field that is used to calculate the age of the document.
- `max_age` (String) Specifies the maximum age of a document in the destination index.



<a id="nestedblock--sync"></a>
### Nested Schema for `sync`

Required:

- `time` (Block List, Min: 1, Max: 1) Specifies that the transform uses a time field to synchronize the source and destination indices. This is currently the only supported option. (see [below for nested schema](#nestedblock--sync--time))

<a id="nestedblock--sync--time"></a>
### Nested Schema for `sync.time`

Required:

- `field` (String) The date field that is used to identify new documents in the source.

Optional:

- `delay` (String) The time delay between the current time and the latest input data time. The default value is 60s.

## Import

Import is supported using the following syntax:

```shell
terraform import elasticstack_elasticsearch_transform.my_new_transform <cluster_uuid>/<transform_name>
```
